<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
    <title>Web Console in Firefox 4</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script>
      $(document).ready(function() {
        var counts = {
          bugs: 0,
          commit: 0,
          waiting: 0,
          review: 0,
          patch: 0,
          test: 0,
          blocker: 0
        };
        $(".bug").each(function(index, elem) {
          var bugNumber = elem.innerHTML;
          var lastSpace = bugNumber.lastIndexOf(" ");
          if (lastSpace > -1) {
            bugNumber = bugNumber.substring(lastSpace + 1);
          }
          elem.setAttribute("href", "https://bugzilla.mozilla.org/show_bug.cgi?id=" + bugNumber);
          elem.setAttribute("target", "_blank");
          var classlist = elem.classList;
          counts.bugs++;
          if (classlist.contains("commit")) {
            counts.commit++;
          }
          if (classlist.contains("waiting")) {
            counts.waiting++;
          }
          if (classlist.contains("review")) {
            counts.review++;
          }
          if (classlist.contains("patch")) {
            counts.patch++;
          }
          if (classlist.contains("blocker")) {
            counts.blocker++;
          }
          if (classlist.contains("test")) {
            counts.test++;
          }
        });
        for (var key in counts) {
          $('#counts_' + key).html(counts[key]);
        }
        $("#counts_notstarted").html(counts.bugs - counts.review - counts.commit - counts.patch - counts.waiting);
      });
    </script>
    <link type="text/css" rel="stylesheet" href="styles.css">
    <style>
      .bug {
        color: #c22;
      }
      
      .blocker {
        color: #c22;
        font-weight: bold;
      }
      
      .patch, .review, .waiting {
        color: #272;
      }
      
      .commit {
        color: #2c2;
      }
      
      #counts_table td {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>Firefox 4 Web Console Completion Status</h1>
    <p><a href="http://scr.im/kdangoor">kdangoor</a>, November 12, 2010</p>
    <h2>Overview</h2>
    <p>The Web Console feature in Firefox 4 is an important tool for developers. This document is intended to make it easy to understand the work that remains for the Web Console.</p>
    <p>The current draft documentation for the Web Console feature is <a href="https://developer.mozilla.org/en/Using_the_Web_Console">up on MDC</a>.</p>
    <p>If you find any errors in this document, please <a href="http://scr.im/kdangoor">email me</a> or <a href="http://github.com/mozilla/devtools">fork this project on GitHub</a>.
    Make sure you're working in the gh-pages branch.</p>
    <p>The numerical picture of Web Console bugs:</p>
    <table id="counts_table">
      <tbody>
        <tr>
          <th>Total bugs in plan for Firefox 4</th><td id="counts_bugs"></td>
        </tr>
        <tr>
          <th>Blockers (in the total)</th><td id="counts_blocker"></td>
        </tr>
        <tr>
          <th>Bugs that are not yet started</th><td id="counts_notstarted"></td>
        <tr>
          <th>Ready to commit!</th><td id="counts_commit"></td>
        </tr>
        <tr>
          <th>Up for review</th><td id="counts_review"></td>
        </tr>
        <tr>
          <th>Has a patch</th><td id="counts_patch"></td>
        </tr>
        <tr>
          <th>Fixed by other bugs</th><td id="counts_waiting"></td>
        </tr>
      </tbody>
    </table>
    
    <p>Bug key:</p>
    <ul>
      <li class="blocker">Blocker without patches</li>
      <li class="commit">Ready to commit</li>
      <li class="review">Progressing</li>
      <li style="color: #c22">Other bug without patches</li>
    </ul>
    
    <h2>UI Polish</h2>
    <p>The Web Console is useful today, but visual changes will go a long way toward making the Web Console look great and be even more usable.</p>
    <div class="image">
      <img src="images/TheConsole.png" width="800">
      <div>Web Console, 10/1</div>
    </div>
    <div class="image">
      <img src="https://bug605621.bugzilla.mozilla.org/attachment.cgi?id=487101" width="800">
      <div>Work-in-progress screenshot, 10/29</div>
    </div>
    <div class="image">
      <img src="images/NetworkInspector.png">
      <div>Network Inspector, 10/1</div>
    </div>
    <div class="image">
      <img src="https://bug603625.bugzilla.mozilla.org/attachment.cgi?id=488169">
      <div>Network Inspector with bug 603625 patch applied</div>
    </div>
    </body>
    <p>The toolbar reformatting is particularly important, because it makes the filtering a lot more usable.</p>
    <p>Open UI polish bugs:</p>
    <ul>
      <li><a class="bug waiting blocker">bug 599498</a> Web Console CSS aesthetics</li>
      <li><a class="bug review blocker">bug 601667</a> Web Console toolbar styling</li>
      <li><a class="bug patch">bug 605621</a> Web Console output box should be reskinned</li>
      <li><a class="bug waiting blocker">bug 601196</a> Console styling busted by personas (waiting on bug 601667)</li>
      <li><a class="bug review">bug 601183</a> Safari/Chrome/Google-style completion for the console</li>
      <li><a class="bug patch">bug 603625</a> Network panel heading realignment</li>
      <li><a class="bug review blocker">bug 598357</a> change command line output to be easier to understand</li>
      <li><a class="bug patch blocker">bug 588379</a> Errors in the Web Console should link to the source file</li>
      <li><a class="bug">bug 609372</a> better icons for the web console</li>
      <li><a class="bug patch">bug 601672</a> Improve display of logging category</li>
      <li><a class="bug waiting blocker">bug 601179</a> Clearing web console is rocket science (waiting on bug 601667)</li>
      <li><a class="bug waiting">bug 598519</a> Web console close button pressed state is one pixel off (vertically and horizontally) (waiting on bug 601667)</li>
      <li><a class="bug">bug 611440</a> Smart abbreviation for URLs in the Web Console (this would be awesome!)</li>
      <li><a class="bug">bug 611795</a> Repeated messages in the Web Console should be collapsed into one</li>
      <li><a class="bug">bug 612252</a> "clear console" needs a keyboard shortcut in a bad way</li>
      <li><a class="bug">bug 612253</a> Need a shortcut key to focus the input line in web console</li>
      <li><a class="bug">bug 611851</a> Make the Web Console resize handle nicer looking on the Mac</li>
    </ul>
    
    <h2>Logging Functionality</h2>
    <p>There are two big areas in which we are improving message logging. This improved logging will also help Firebug.</p>
    <ul>
      <li>Many more messages will be associated as they are created directly with the window/tab for which they are relevant. The Web Console and Firebug have been using heuristics for these to date, rather than explicit data.</li>
      <li>The lazy console service will allow logging of messages before the console is opened.</li>
    </ul>
    <p>Open logging functionality bugs:</p>
    <ul>
      <li><a class="bug">bug 609890</a> display cached console messages when the user opens the console</li>
      <li><a class="bug">bug 602199</a> eliminate cached console data when moving in and out of Private Browsing</li>
      <li><a class="bug review blocker">bug 606498</a> log messages with associated window using nsiScriptError2</li>
      <li><a class="bug review blocker">bug 587734</a> Integrate lazy window console API into WebConsole code</li>
      <li><a class="bug commit blocker">bug 597756</a> Fx 4 Web Console fails to show javascript errors if a tab is closed and the same document is then re-opened in a new tab</li>
      <li><a class="bug review blocker">bug 595223</a> log loading from file:// urls</li>
      <li><a class="bug review blocker">bug 601177</a> log errors and warnings at the proper levels for sane filtering</li>
      <li><a class="bug blocker">bug 601260</a> Cache all messages in the ConsoleStorageService once all web console observers are running</li>
      <li><a class="bug waiting blocker">bug 605241</a> JavaScript strict warnings from external scripts do not show in the Web Console (waiting on bug 597136)</li>
      <li><a class="bug waiting">bug 603706</a> Need a way to track the originating window for all nsIConsoleMessages (waiting on the other patches that fix uses of nsiConsoleMessage)</li>
      <li><a class="bug patch">bug 603750</a> nsWebSocket connection failure messages do not show in the Web Console</li>
    </ul>
    
    <h2>JavaScript Console</h2>
    <p>These are improvements we want to make to the JavaScript command line:</p>
    <ul>
      <li><a class="bug review">bug 605419</a> Provide a help command</li>
      <li><a class="bug">bug 611549</a> Web Console console input box isn't localized for RTL</li>
    </ul>
    
    <h2>Other bugs</h2>
    <p>Yep, there are some other random things we're fixing up as well.</p>
    <ul>
      <li><a class="bug commit blocker">bug 597460</a> Web Console scrolls to top when (at least) a filtered network event occurs</li>
      <li><a class="bug">bug 599725</a> Web Console reports data the server did not send (304 not modified) - shows headers from the cache, not headers from the server</li>
      <li><a class="bug review">bug 605634</a> Opening two Web Consoles on the same URI causes errors</li>
      <li><a class="bug commit blocker">bug 601909</a> Persist console height</li>
      <li><a class="bug commit blocker">bug 600183</a> if someone opens another
      tab while receiving network data in the first tab, the results logged in the
      console of that first tab will use things like character set from the *new*
      tab.</li>
      <li><a class="bug blocker">bug 601126</a> Time elapsed in console log doesn't always match time in net request inspector</li>
      <li><a class="bug waiting blocker">bug 598438</a> window.console and window.onerror fail to work in iframes on first Web Console open (waiting on bugs 605241 and 587734)</li>
      <li><a class="bug commit blocker">bug 597151</a> The HUDConsoleObserver is never removed</li>
      <li><a class="bug review blocker">bug 594523</a> When tab location changes, the HUDService fails to clear/update state information</li>
      <li><a class="bug patch blocker">bug 602572</a> Log request and response bodies checkbox issues in Web Console</li>
      <li><a class="bug waiting blocker">bug 595889</a> Web Console does not report exceptions if multiple windows are opened</li>
      <li><a class="bug waiting blocker">bug 603005</a> HUDService should avoid the use of DOM mutation event listeners (waiting on bug 605621)</li>
      <li><a class="bug waiting blocker">bug 606055</a> Memory leaks on google.com with the Web Console open (waiting on bug 597151)</li>
      <li><a class="bug waiting">bug 605473</a> Web console logging throws an error if you reopen the console</li>
      <li><a class="bug waiting">bug 568661</a> make sure the console initiates with about:blank pages</li>
      <li><a class="bug">bug 609952</a> Move sendToWebConsole functionality from ConsoleAPIObserver to HUDService</li>
      <li><a class="bug">bug 609950</a> Make sure CAO_observe use getHudIdByWindow(getWindowByWindowId(ID))</li>
      <li><a class="bug">bug 610609</a> The console's logging API is disabled after toggling fullscreen mode</li>
      <li><a class="bug">bug 603856</a> Intermittent failure in resource:///modules/HUDService.jsm</li>
      <li><a class="bug">bug 611032</a> Break out HUDConsoleObserver from HUDService</li>
      <li><a class="bug waiting">bug 611600</a> Possible to get Web Console into unclosable state</li>
      <li><a class="bug">bug 611789</a> Web Console cleanup: Remove the window registry</li>
      <li><a class="bug">bug 612138</a> Cannot open the web console on my debug build</li>
      <li><a class="bug">bug 592469</a> Web Console cleanup: kill getHeadsUpDisplay()</li>
      <li><a class="bug waiting">bug 592309</a> Web Console should use &lt;description> elements instead of &lt;label> elements for its output</li>
    </ul>
    
    <h2>Error Console</h2>
    <p>Our old friend the Error Console is being hidden away, since most web developers will get everything they need out of the Web Console. We have a little bit of work left to do to hide the error console.</p>
    <ul>
      <li><a class="bug commit blocker">bug 593540</a> Don't display content errors in the Error Console</li>
      <li><a class="bug blocker">bug 602006</a> disable Error Console again once Web Console improvements land</li>
    </ul>
    
    <h2>Cleanup/Tests</h2>
    <p>We have some bugs that are not functionality-related but are important bits of cleanup.</p>
    <ul>
      <li><a class="bug">bug 603001</a> .hud-filtered-by-type .hud-filtered-by-string style rules belong in content</li>
      <li><a class="bug test patch">bug 601006</a> Re-enable API enumeration test</li>
      <li><a class="bug test patch">bug 602024</a> mixed licensing in HUDService.jsm is confusing</li>
      <li><a class="bug test patch">bug 594741</a> Web Console stress test</li>
      <li><a class="bug test patch">bug 605351</a> fix and re-enable browser_webconsole_bug_593003_iframe_wrong_hud.js</li>
      <li><a class="bug test">bug 607325</a> Test browser_webconsole_bug_594477_clickable_output.js always fails for me</li>
      <li><a class="bug test waiting">bug 600095</a> Followup test fixes after lazy console lands (waiting on bug 587734)</li>
      <li><a class="bug test">bug 609723</a> Assertion in browser_webconsole_bug_597103_deactivateHUDForContext_unfocused_window.js</li>
      <li><a class="bug test">bug 609718</a> Assertion in browser_webconsole_chrome.js</li>
      <li><a class="bug test">bug 610953</a> hudservice head.js should not declare variables or call waitForFinish</li>
    </ul>
  </body>
</html>